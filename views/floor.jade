extends layout

block content
  p
    a(href="/") Back to dashboard
  #slider
  #floor

  link(rel='stylesheet', href='/css/jquery-ui-1.10.1.custom.css')
  script(src='/js/vendor/jquery-ui-1.10.1.custom.js')
  script(src='/js/vendor/heatmap.js')
  script(type='text/javascript')
    $(function () {
      var xx = h337.create({"element":document.getElementById("floor"), "radius":25, "visible":true});
      var load_heatmap = function(value) {
        // TODO: these coords are correct, but I'm not sure which PIR subdevices these map to.
        var data = {max: 90, data: [
          {x: 345, y: 264},
          {x: 629, y: 254},
          {x: 714, y: 260},
          {x: 776, y: 261},
          {x: 900, y: 320},
          {x: 411, y: 605},
          {x: 498, y: 606},
          {x: 580, y: 610},
        ]};
        var max = 90;
        for (d in data.data) {
            data.data[d].count=Math.floor(Math.random()*max+1);
        }
        xx.store.setDataSet(data);
      }
      $("#slider").slider({
        slide: function(event, ui) { load_heatmap(ui.value); }
      });
    });
